<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Strategy Card Generator</title><script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto:wght@400;500;700&family=Montserrat:wght@400;500;700&family=Poppins:wght@400;500;700&family=Open+Sans:wght@400;500;700&display=swap" rel="stylesheet"><style>*{margin:0;padding:0;box-sizing:border-box}:root{--bg-primary:#ffffff;--bg-secondary:#f8f9fa;--border:#e5e7eb;--text-primary:#111827;--text-secondary:#6b7280;--text-muted:#9ca3af;--accent:#2563eb;--accent-hover:#1d4ed8;--destructive:#dc2626;--warning:#f59e0b;--warning-bg:#fef3c7;--warning-border:#fcd34d;--success:#10b981;--radius:0.5rem;--shadow-sm:0 1px 2px 0 rgb(0 0 0 / 0.05);--shadow:0 1px 3px 0 rgb(0 0 0 / 0.1),0 1px 2px -1px rgb(0 0 0 / 0.1);--shadow-md:0 4px 6px -1px rgb(0 0 0 / 0.1),0 2px 4px -2px rgb(0 0 0 / 0.1)}body{font-family:Inter,-apple-system,BlinkMacSystemFont,sans-serif;background:var(--bg-secondary);color:var(--text-primary);line-height:1.5;padding:1.5rem}.container{max-width:1400px;margin:0 auto}h1{font-size:1.875rem;font-weight:700;margin-bottom:1.5rem;color:var(--text-primary)}.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:1.5rem}@media (min-width:1024px){.grid{grid-template-columns:1fr 1fr 1fr}}.card{background:var(--bg-primary);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow-sm);display:flex;flex-direction:column;height:fit-content}.card-header{padding:1rem 1.25rem;border-bottom:1px solid var(--border)}.card-title{font-size:1rem;font-weight:600;color:var(--text-primary)}.card-content{padding:1.25rem;flex:1}.form-group{margin-bottom:1.25rem}.form-group:last-child{margin-bottom:0}label{display:block;font-size:.875rem;font-weight:500;color:var(--text-primary);margin-bottom:.5rem}input[type=number],input[type=text],select{width:100%;padding:.5rem .75rem;font-size:.875rem;border:1px solid var(--border);border-radius:calc(var(--radius) - 2px);background:var(--bg-primary);color:var(--text-primary);transition:all .15s}input[type=number]:focus,input[type=text]:focus,select:focus{outline:0;border-color:var(--accent);box-shadow:0 0 0 2px rgba(37,99,235,.2)}input[type=color]{width:48px;height:32px;border:1px solid var(--border);border-radius:calc(var(--radius) - 2px);cursor:pointer}input[type=file]{font-size:.875rem;padding:.375rem}.btn{padding:.5rem 1rem;font-size:.875rem;font-weight:500;border:none;border-radius:calc(var(--radius) - 2px);cursor:pointer;transition:all .15s;display:inline-flex;align-items:center;justify-content:center;gap:.5rem}.btn-primary{background:var(--accent);color:#fff}.btn-primary:hover:not(:disabled){background:var(--accent-hover)}.btn-primary:disabled{opacity:.5;cursor:not-allowed}.btn-outline{background:0 0;border:1px solid var(--border);color:var(--text-primary)}.btn-outline:hover{background:var(--bg-secondary)}.btn-outline.active{background:var(--accent);color:#fff;border-color:var(--accent)}.btn-group{display:flex;gap:.5rem}.btn-sm{padding:.25rem .75rem;font-size:.75rem}.btn-icon{padding:.5rem;width:32px;height:32px}.color-picker-group{display:flex;gap:.5rem;align-items:center}.color-value{font-size:.75rem;color:var(--text-muted)}.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:.75rem}.template-btn{aspect-ratio:1.585;padding:0;overflow:hidden;border:2px solid var(--border);cursor:pointer;transition:all .15s}.template-btn:hover{border-color:var(--accent)}.template-btn img{width:100%;height:100%;object-fit:cover}.preview-container{width:100%;max-width:400px;aspect-ratio:1.585;margin:0 auto;border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;background:#fff}.cards-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.generated-card{border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow-sm)}.generated-card-preview{aspect-ratio:1.585;width:100%}.generated-card-code{padding:.5rem;text-align:center;font-family:monospace;font-size:.75rem;background:var(--bg-secondary);border-top:1px solid var(--border)}.progress-bar{width:100%;height:8px;background:var(--bg-secondary);border-radius:999px;overflow:hidden;margin-bottom:.5rem}.progress-fill{height:100%;background:var(--accent);transition:width .3s}.alert{padding:1rem;border-radius:var(--radius);margin-bottom:1rem}.alert-warning{background:var(--warning-bg);border:1px solid var(--warning-border);color:#92400e}.alert-icon{display:inline-block;width:20px;height:20px;margin-right:.5rem;vertical-align:middle}.empty-state{display:flex;align-items:center;justify-content:center;min-height:200px;color:var(--text-muted);font-size:.875rem}.modal-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:1000;align-items:center;justify-content:center}.modal-overlay.active{display:flex}.modal{background:#fff;padding:1.5rem;border-radius:var(--radius);max-width:500px;width:90%;box-shadow:var(--shadow-md)}.modal-header{margin-bottom:1rem}.modal-title{font-size:1.25rem;font-weight:600;margin-bottom:.5rem}.modal-description{font-size:.875rem;color:var(--text-secondary)}.modal-footer{display:flex;gap:.5rem;justify-content:flex-end;margin-top:1.5rem}.text-sm{font-size:.875rem}.text-xs{font-size:.75rem}.text-muted{color:var(--text-muted)}.mb-2{margin-bottom:.5rem}.hidden{display:none}svg{display:block}</style></head><body><div class="container"><h1>Strategy Card Generator</h1><div class="grid"><div class="card"><div class="card-header"><h2 class="card-title">Strategy Card Details</h2></div><div class="card-content"><div class="form-group"><label for="numCards">Number of Cards (Max 6)</label> <input type="number" id="numCards" min="1" max="6" value="1"></div><div id="codeInputs"></div><div class="form-group"><label for="price">Price (max 4 characters)</label><div style="display:flex;gap:.5rem"><input type="text" id="price" maxlength="4" placeholder="e.g. 1439"> <button class="btn btn-outline btn-icon active" data-currency="£">£</button> <button class="btn btn-outline btn-icon" data-currency="$">$</button> <button class="btn btn-outline btn-icon" data-currency="₹">₹</button></div></div><div class="form-group"><label for="websiteUrl">Strategy or Training Code</label> <input type="text" id="websiteUrl" value="www.yourwebsite.com" maxlength="30"> <span class="text-xs text-muted" id="urlError"></span></div><div class="form-group"><label>Valid Until</label><div class="btn-group mb-2"><button class="btn btn-outline btn-sm active" data-validity="1day">1 Day</button> <button class="btn btn-outline btn-sm" data-validity="1week">1 Week</button> <button class="btn btn-outline btn-sm" data-validity="1month">1 Month</button></div><div style="padding:.5rem .75rem;border:1px solid var(--border);border-radius:calc(var(--radius) - 2px)"><span id="validityDisplay"></span></div></div><div class="grid-3"><div class="form-group"><label>Text Color</label><div class="color-picker-group"><input type="color" id="textColor" value="#333333"> <span class="color-value" id="textColorValue">#333333</span></div></div><div class="form-group"><label>Box Color</label><div class="color-picker-group"><input type="color" id="boxColor" value="#FFFFFF"> <span class="color-value" id="boxColorValue">#FFFFFF</span></div></div><div class="form-group"><label for="fontStyle">Font Style</label> <select id="fontStyle"><option value="Arial">Arial</option><option value="Roboto" selected="selected">Roboto</option><option value="Montserrat">Montserrat</option><option value="Poppins">Poppins</option><option value="Open Sans">Open Sans</option></select></div></div><div class="form-group"><label>Background Templates</label><div class="grid-3"><button class="template-btn" data-template="1"><div style="width:100%;height:100%;background:linear-gradient(135deg,#667eea 0,#764ba2 100%)"></div></button> <button class="template-btn" data-template="2"><div style="width:100%;height:100%;background:linear-gradient(135deg,#f093fb 0,#f5576c 100%)"></div></button> <button class="template-btn" data-template="3"><div style="width:100%;height:100%;background:linear-gradient(135deg,#4facfe 0,#00f2fe 100%)"></div></button></div></div><div class="form-group"><label for="customBg">Upload Custom Background</label> <input type="file" id="customBg" accept="image/*"></div><button class="btn btn-primary" id="generateBtn" style="width:100%">Generate Cards</button></div></div><div class="card"><div class="card-header"><h2 class="card-title">Preview Card</h2></div><div class="card-content" style="display:flex;align-items:center;justify-content:center"><div class="preview-container" id="previewContainer"></div></div></div><div class="card"><div class="card-header"><h2 class="card-title">Generated Cards</h2></div><div class="card-content" style="max-height:600px;overflow-y:auto"><div id="downloadAlert" class="hidden"></div><div id="progressBar" class="hidden"><div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div><div class="text-xs text-muted" id="progressText"></div></div><div id="cardsGrid" class="cards-grid hidden"></div><div id="emptyState" class="empty-state">No cards generated yet</div></div></div></div></div><div class="modal-overlay" id="confirmModal"><div class="modal"><div class="modal-header"><h3 class="modal-title">Confirm Generation</h3><p class="modal-description">You are about to generate <span id="confirmCount"></span> card(s). This process cannot be interrupted once started.</p></div><div class="modal-footer"><button class="btn btn-outline" id="cancelBtn">Cancel</button> <button class="btn btn-primary" id="confirmBtn">Generate Now</button></div></div></div><div class="modal-overlay" id="successModal"><div class="modal"><div class="modal-header"><h3 class="modal-title">PDF Generated Successfully!</h3><div class="modal-description"><p class="mb-2">Your PDF is ready to download:</p><p style="font-weight:600;color:var(--accent)" id="pdfFilename"></p><div class="alert alert-warning" style="margin-top:1rem"><strong>IMPORTANT:</strong> This is your ONLY chance to download these cards. The PDF cannot be regenerated later.</div><p style="margin-top:.5rem">Please use the download button in the right panel.</p></div></div><div class="modal-footer"><button class="btn btn-primary" id="successOkBtn">OK</button></div></div></div><script>function addDays(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function addMonths(e,t){const n=new Date(e);return n.setMonth(n.getMonth()+t),n}function formatDate(e,t){const n=new Date(e),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if("dd-MMM-yyyy"===t){return`${String(n.getDate()).padStart(2,"0")}-${a[n.getMonth()]}-${n.getFullYear()}`}if("yyyyMMdd-HHmmss"===t){return`${n.getFullYear()}${String(n.getMonth()+1).padStart(2,"0")}${String(n.getDate()).padStart(2,"0")}-${String(n.getHours()).padStart(2,"0")}${String(n.getMinutes()).padStart(2,"0")}${String(n.getSeconds()).padStart(2,"0")}`}return e.toString()}const state={numCards:1,codes:[""],price:"",currency:"£",websiteUrl:"www.yourwebsite.com",validUntil:null,textColor:"#333333",boxColor:"#FFFFFF",font:"Roboto",backgroundImage:null,generatedCards:[],pdfBlob:null,pdfFilename:"",isGenerating:!1};function initializeApp(){state.validUntil=addDays(new Date,1),updateValidityDisplay(),loadTemplateBackground(1),renderCodeInputs(),updatePreview(),setupEventListeners()}function setupEventListeners(){document.getElementById("numCards").addEventListener("input",e=>{state.numCards=Math.min(parseInt(e.target.value)||1,6),e.target.value=state.numCards,renderCodeInputs()}),document.getElementById("price").addEventListener("input",e=>{state.price=e.target.value.slice(0,4),e.target.value=state.price,updatePreview()}),document.querySelectorAll("[data-currency]").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll("[data-currency]").forEach(e=>e.classList.remove("active")),e.classList.add("active"),state.currency=e.dataset.currency,updatePreview()})}),document.getElementById("websiteUrl").addEventListener("input",e=>{state.websiteUrl=e.target.value.slice(0,30),e.target.value=state.websiteUrl,updatePreview()}),document.querySelectorAll("[data-validity]").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll("[data-validity]").forEach(e=>e.classList.remove("active")),e.classList.add("active");const t=e.dataset.validity,n=new Date;"1day"===t?state.validUntil=addDays(n,1):"1week"===t?state.validUntil=addDays(n,7):"1month"===t&&(state.validUntil=addMonths(n,1)),updateValidityDisplay(),updatePreview()})}),document.getElementById("textColor").addEventListener("input",e=>{state.textColor=e.target.value,document.getElementById("textColorValue").textContent=e.target.value,updatePreview()}),document.getElementById("boxColor").addEventListener("input",e=>{state.boxColor=e.target.value,document.getElementById("boxColorValue").textContent=e.target.value,updatePreview()}),document.getElementById("fontStyle").addEventListener("change",e=>{state.font=e.target.value,updatePreview()}),document.querySelectorAll("[data-template]").forEach(e=>{e.addEventListener("click",()=>{loadTemplateBackground(parseInt(e.dataset.template))})}),document.getElementById("customBg").addEventListener("change",e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{state.backgroundImage=e.target.result,updatePreview()},e.readAsDataURL(t)}}),document.getElementById("generateBtn").addEventListener("click",showConfirmDialog),document.getElementById("cancelBtn").addEventListener("click",hideConfirmDialog),document.getElementById("confirmBtn").addEventListener("click",generateCards),document.getElementById("successOkBtn").addEventListener("click",hideSuccessModal)}function renderCodeInputs(){const e=document.getElementById("codeInputs");for(e.innerHTML="";state.codes.length<state.numCards;)state.codes.push("");for(;state.codes.length>state.numCards;)state.codes.pop();state.codes.forEach((t,n)=>{const a=document.createElement("div");a.className="form-group",a.innerHTML=`\n                    <label for="code${n}">Card Code #${n+1}</label>\n                    <input type="text" id="code${n}" value="${t}" placeholder="Enter 8-character code" maxlength="8">\n                `,e.appendChild(a),a.querySelector("input").addEventListener("input",e=>{state.codes[n]=e.target.value,updatePreview()})})}function updateValidityDisplay(){document.getElementById("validityDisplay").textContent=formatDate(state.validUntil,"dd-MMM-yyyy")}function loadTemplateBackground(e){const t=document.createElement("canvas");t.width=856,t.height=540;const n=t.getContext("2d"),a=n.createLinearGradient(0,0,856,540);1===e?(a.addColorStop(0,"#667eea"),a.addColorStop(1,"#764ba2")):2===e?(a.addColorStop(0,"#f093fb"),a.addColorStop(1,"#f5576c")):(a.addColorStop(0,"#4facfe"),a.addColorStop(1,"#00f2fe")),n.fillStyle=a,n.fillRect(0,0,856,540),state.backgroundImage=t.toDataURL(),updatePreview()}function createCardSVG(e=null){const t=e||state.codes[0]||"XXX12345",n=t.length>=3?`${t.slice(0,3)}-${t.slice(3)}`:t;return`\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 85.6 54" style="width: 100%; height: 100%;">\n                    <defs>\n                        <filter id="boxShadow">\n                            <feDropShadow dx="0.5" dy="0.5" stdDeviation="0.5" flood-opacity="0.3"/>\n                        </filter>\n                    </defs>\n                    \n                    ${state.backgroundImage?`\n                        <image x="0" y="0" width="100%" height="100%" href="${state.backgroundImage}" preserveAspectRatio="xMidYMid slice"/>\n                    `:'\n                        <rect width="100%" height="100%" fill="#f8f8f8"/>\n                        <text x="42.8" y="27" font-family="Arial" font-size="4" text-anchor="middle" fill="#aaa">Choose your Background</text>\n                    '}\n                    \n                    <g transform="translate(0, 0)">\n                        <rect x="3" y="3" width="22" height="8" fill="${state.boxColor}" rx="3" ry="3" \n                              stroke="${state.textColor}" stroke-width="0.5" filter="url(#boxShadow)"/>\n                        <text x="7" y="8.5" font-family="${state.font}" font-size="5" font-weight="bold" \n                              fill="${state.textColor}" text-anchor="start">${state.currency} ${state.price}</text>\n                    </g>\n                    \n                    <text x="56.8" y="31" font-family="${state.font}" font-size="3" \n                          fill="${state.textColor}" text-anchor="middle">${state.websiteUrl}</text>\n                    \n                    <text x="57" y="40" font-family="${state.font}" font-size="7" font-weight="500" \n                          fill="${state.textColor}" letter-spacing="1" text-anchor="middle">${n}</text>\n                    \n                    <g transform="translate(42.8, 45)">\n                        <rect x="4" y="-2.5" width="32" height="6" fill="${state.boxColor}" rx="3" ry="3" \n                              stroke="${state.textColor}" stroke-width="0.5" filter="url(#boxShadow)"/>\n                        <text x="20" y="0.5" font-family="${state.font}" font-size="1.8" text-anchor="middle" \n                              fill="${state.textColor}" font-weight="bold">VALID UNTIL</text>\n                        <text x="20" y="2.8" font-family="${state.font}" font-size="2.8" text-anchor="middle" \n                              fill="${state.textColor}">${formatDate(state.validUntil,"dd-MMM-yyyy").toUpperCase()}</text>\n                    </g>\n                </svg>\n            `}function updatePreview(){document.getElementById("previewContainer").innerHTML=createCardSVG()}function showConfirmDialog(){state.price&&!state.codes.some(e=>!e.trim())?(document.getElementById("confirmCount").textContent=state.numCards,document.getElementById("confirmModal").classList.add("active")):alert("Please fill in all required fields")}function hideConfirmDialog(){document.getElementById("confirmModal").classList.remove("active")}function hideSuccessModal(){document.getElementById("successModal").classList.remove("active")}async function generateCards(){hideConfirmDialog(),state.isGenerating=!0,state.generatedCards=[],document.getElementById("progressBar").classList.remove("hidden"),document.getElementById("emptyState").classList.add("hidden"),document.getElementById("cardsGrid").innerHTML="";const e=document.getElementById("cardsGrid");e.classList.remove("hidden");for(let t=0;t<state.numCards;t++){const n={code:state.codes[t],timestamp:(new Date).toISOString()};state.generatedCards.push(n);const a=document.createElement("div");a.className="generated-card",a.innerHTML=`\n                    <div class="generated-card-preview">${createCardSVG(n.code)}</div>\n                    <div class="generated-card-code">${n.code}</div>\n                `,e.appendChild(a);const d=(t+1)/state.numCards*100;document.getElementById("progressFill").style.width=d+"%",document.getElementById("progressText").textContent=`Generating ${t+1} of ${state.numCards} cards...`,t<state.numCards-1&&await new Promise(e=>setTimeout(e,500))}document.getElementById("progressBar").classList.add("hidden"),await generatePDF(),state.isGenerating=!1}async function generatePDF(){const{jsPDF:e}=window.jspdf,t=new e({unit:"mm",format:"a4",orientation:"portrait"});for(let e=0;e<state.generatedCards.length;e+=6){e>0&&t.addPage();for(let n=0;n<3;n++)for(let a=0;a<2;a++){const d=e+2*n+a;if(d>=state.generatedCards.length)continue;const o=20+90.6*a,r=20+59*n,s=document.createElement("div");s.style.cssText="position: fixed; left: -9999px; width: 856px; height: 540px;",s.innerHTML=createCardSVG(state.generatedCards[d].code),document.body.appendChild(s),await new Promise(e=>setTimeout(e,500));const i=await html2canvas(s,{scale:2,useCORS:!0,logging:!1});t.addImage(i.toDataURL("image/png"),"PNG",o,r,85.6,54),document.body.removeChild(s)}}const n=`strategy_cards_${state.generatedCards.length}cards_${formatDate(new Date,"yyyyMMdd-HHmmss")}.pdf`;state.pdfBlob=t.output("blob"),state.pdfFilename=n,showDownloadAlert(),document.getElementById("pdfFilename").textContent=n,document.getElementById("successModal").classList.add("active"),confetti({particleCount:100,spread:70,origin:{y:.6}})}function showDownloadAlert(){const e=document.getElementById("downloadAlert");e.className="alert alert-warning",e.innerHTML='\n                <div style="display: flex; align-items: start; gap: 0.75rem;">\n                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>\n                        <line x1="12" y1="9" x2="12" y2="13"></line>\n                        <line x1="12" y1="17" x2="12.01" y2="17"></line>\n                    </svg>\n                    <div style="flex: 1;">\n                        <p style="font-weight: 600; margin-bottom: 0.5rem;">Your PDF is ready to download</p>\n                        <p style="font-size: 0.875rem; margin-bottom: 1rem;">Download your PDF now or you will lose access to these cards.</p>\n                        <button class="btn btn-primary" onclick="downloadPDF()" style="width: 100%;">\n                            Download PDF Now\n                        </button>\n                    </div>\n                </div>\n            '}function downloadPDF(){if(state.pdfBlob&&state.pdfFilename){const e=URL.createObjectURL(state.pdfBlob),t=document.createElement("a");t.href=e,t.download=state.pdfFilename,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(e),document.getElementById("downloadAlert").classList.add("hidden")}}document.addEventListener("DOMContentLoaded",()=>{initializeApp()})</script></body></html>